\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{template}[2024/04/11 v1]

% Math generals
\RequirePackage{amsmath, ragged2e, mathrsfs, amsfonts, dsfont, amssymb, mathtools}
\allowdisplaybreaks

% ======== Customizable commands ====
\renewcommand{\emph}[1]{{\slshape #1}}
\newcommand{\strong}[1]{{\slshape\bfseries #1}}

\newcommand{\algcl}[1]{\overline{#1}} % Algebraic closure. Use: \algcl k
\newcommand{\sepcl}[1]{#1_{\mathrm{s}}}
\newcommand{\Int}[1]{\mathring{#1}} % Interior of a set
\newcommand{\G}{\mathfrak{G}} % Absolute Galois group
\newcommand{\tors}[2]{{#1}_{#2}} % Torsion of elliptic curve

\DeclareMathOperator{\numnorm}{\mathbf{N}} % Numeric norm
\DeclareMathOperator{\WRes}{\mathfrak{R}} % Weil's restriction of scalars group
\DeclareMathOperator{\Frob}{F} % Frobenius's endomorphism

\RequirePackage{bm}
\let\Vec\vec
\renewcommand\vec[1]{\bm{#1}} % boldface vectors

\newcommand{\ud}{\mathrm{d}} % derivative
% \newcommand{\ud}{\mathit{d}}

\renewcommand{\setminus}{\ensuremath{-}}

% ======== Generic commands =========
\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}

\newcommand{\A}{\mathbb{A}} % Affine space
\newcommand{\PP}{\mathbb{P}} % Projective space

\newcommand{\TT}{\mathbb{T}} % Torus
\newcommand{\GG}{\mathbb{G}}
\renewcommand{\SS}{\mathbb{S}} % Circle/spheres


\DeclareMathOperator{\Card}{Card}
\DeclareMathOperator{\Occ}{Occ}

\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\Mat}{M}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\PSL}{PSL}
\DeclareMathOperator{\Supp}{Supp}

\DeclareMathOperator{\Id}{Id}
\DeclareMathOperator{\Cl}{Cl}
\DeclareMathOperator{\pr}{pr}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Rep}{Rep}
\DeclareMathOperator{\Nm}{N}


\DeclareMathOperator{\Gl}{\mathfrak{gl}}
\DeclareMathOperator{\Sl}{\mathfrak{sl}}

\DeclareMathOperator{\id}{id}

\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Proj}{Proj}
\DeclareMathOperator{\Rad}{Rad}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\Div}{Div}

% \DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\Img}{Im}
\renewcommand{\char}{\ensuremath{\operatorname{char}}}

\newcommand{\abcl}[1]{#1^{\mathrm{ab}}}

% \newcommand{\hookto}{\hookrightarrow}
% \newcommand{\epicto}{\twoheadrightarrow}
% \newcommand{\dashto}{\dashrightarrow}

\newcommand{\acts}{ \mathrel{\curvearrowright} }
\let\invlim\varprojlim
\let\liminv\varprojlim
\let\dirlim\varinjlim
\let\limdir\varinjlim

\newcommand{\tqedhere}{\tag*{\qedhere}}

% ======== General packages =========
\RequirePackage[x11names, dvipsnames]{xcolor}
\RequirePackage[utf8]{inputenc}
\RequirePackage[english]{babel}
\RequirePackage{framed}
% \RequirePackage{fdsymbol} % Don't

% ======== Hyphen words correctly ===
\hyphenation{con-ti-nuous}
\hyphenation{Ta-ni-ya-ma}

% ======== Chapter sections =========
\RequirePackage[indentafter]{titlesec}
\renewcommand{\thechapter}{\Roman{chapter}}
\titleformat{\chapter}[display]
	{\centering\normalfont\Large\bfseries}
	{CHAPTER \thechapter}
	{1em}
	{\MakeUppercase}

\renewcommand\thesection{\arabic{section}}
\titleformat{\section}
	{\centering\normalfont\Large\bfseries}
	{\textmd{\S}\thesection.}
	{1em}
	{}

\setcounter{secnumdepth}{3} % Add numbered subsubsections
\renewcommand\thesubsubsection{\arabic{subsubsection}}
\titleformat{\subsubsection}[runin]
	{\bfseries}
	{\thesubsubsection.}
	{1ex}
	{}[.]

\usepackage{appendix}
\renewcommand{\setthesection}{\Alph{section}}

% ======== Headers and footers ======
\RequirePackage{fancyhdr}
\pagestyle{fancy}
\fancyhead[L,C,R]{}
\fancyhead[LE, RO]{\thepage}
\fancyhead[RE]{ABELIAN {$\ell$}-ADIC REPRESENTATIONS}
\fancyhead[LO]{\MakeUppercase{\leftmark}}
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\headrule}{}

% ======== Utilities ================
\RequirePackage[shortlabels]{enumitem}
\RequirePackage{comment}
\RequirePackage{hyperref}
\RequirePackage{calc}
\RequirePackage{xpatch}
\RequirePackage{longtable}
\RequirePackage{multicol}

\setlist[enumerate,1]{label=\arabic*), ref=\arabic*} % Enumerate standards

% ======== TODOs ====================
\RequirePackage{todonotes}
\setuptodonotes{inline}
\todostyle{pinktask}{prepend, caption={Belén \textcolor{WildStrawberry}{$\heartsuit$}}, noinline, noline, color=pink!40}
\todostyle{bluetask}{prepend, caption={José}, noinline, noline, color=teal!30}
\todostyle{section}{inline, color=SeaGreen}

% ======== Graphics =================
\RequirePackage{color}
\RequirePackage{float}
\RequirePackage{tikz-cd}
% \RequirePackage{bmpsize}
% \DeclareGraphicsExtensions{.bmp,.png,.pdf,.jpg}
\usetikzlibrary{babel}

\RequirePackage{csquotes}
\RequirePackage[
	backend=biber,
	doi=true,
	uniquename=init,
	style=nature,
	sorting=nyt,
	defernumbers=true,
	loccittracker=true,
	citestyle=numeric
]{biblatex}

% Quotations in boldface
\DeclareFieldFormat{labelnumber}{\mkbibbold{#1}}
\AtBeginBibliography{
	\DeclareFieldFormat{labelnumber}{#1}
}
\addbibresource{reference.bib}
\renewcommand*{\bibfont}{\small} % Smaller bibliographies

% ======== Theorems =================
\RequirePackage{amsthm}
\newtheorem{thm}{Theorem}[subsection]
\renewcommand{\thethm}{\arabic{thm}}
\newtheorem{prop}{Proposition}[subsection]
\renewcommand{\theprop}{\arabic{prop}}
\newtheorem{lem}{Lemma}[subsection]
%MAINLEMMA
\newtheorem*{mlem}{Main lemma}[subsection]
\renewcommand{\thelem}{\arabic{lem}}

\newtheorem{cor}{Corollary}[thm] % A whole lot of corollaries
\newtheorem{corp}{Corollary}[prop]
\newtheorem{corl}{Corollary}[lem]

\theoremstyle{definition}
\newtheorem{mydef}{Definition}[subsection]
\renewcommand{\themydef}{\arabic{mydef}}
\newtheorem*{obs}{Remark}
\newtheorem*{ex}{Examples}

\renewenvironment{proof}[1][]{\par
\pushQED{\qed}%
\normalfont \topsep6\p@\@plus6\p@\relax
\trivlist
\item\relax
	{\itshape
	\proofname #1\@addpunct{.}}\hspace\labelsep\ignorespaces
}{%
	\popQED\endtrivlist\@endpefalse
}
% \renewenvironment{proof}[1][]{\begin{oldproof}[\proofname #1]}{\end{oldproof}}

% ======== Page counter =============
\newcounter{origpage}[chapter]
\renewcommand{\theorigpage}{\thechapter-\arabic{origpage}}
\newcommand{\dpage}{\stepcounter{origpage}\marginpar[\small\raggedleft\theorigpage]{\small\theorigpage}}

\RequirePackage{imakeidx}
\makeindex[intoc]

% TODO
